/ FullCalendar CSS
link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css"
/ FullCalendar JS
script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.17/index.global.min.js"
script src='https://unpkg.com/popper.js/dist/umd/popper.min.js'
script src="https://unpkg.com/tooltip.js/dist/umd/tooltip.min.js"


div data-controller="calendar-component" data-calendar-component-target="calendar" class="calendar-container"
    div class="flex align-center justify-center"
        div id="calendar" class="w-full h-full mt-2"

javascript:
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    window.calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: [],
      eventClick: function(info) {
        info.jsEvent.preventDefault();
        window.location = info.event.url;
      },
      eventDidMount: function(info) {
        // Set href of the event element to the event URL
        info.el.setAttribute('href', info.event.url);

        // Initialize the tooltip with custom options
        const eventStart = info.event.start;
        const eventEnd = info.event.end || eventStart;
        const eventTitle = info.event.title;
        const location = info.event.extendedProps.location || 'Remote';
        const description = info.event.extendedProps.description || '';
        const orgName = info.event.extendedProps.orgName || '?';
        const eventTypes = info.event.extendedProps.eventType || [];

        const badge_bg_colors = { "Fundraiser": "#E1F3FF", "Volunteer": "#E0E7FF", "Outreach": "#DBFFE5", "Other": "#EDEDED" };
        const badge_text_colors = { "Fundraiser": "#113C7B", "Volunteer": "#4338CA", "Outreach": "#08543D", "Other": "#1F2C3D" };

        const singleDay = eventStart.getDate() === eventEnd.getDate();
        const truncateLength = 250;
        
        const tooltipContent = `
          <div class="p-4 z-10 bg-white rounded-[5px] shadow-[5px_5px_10px_5px_rgba(0,0,0,0.05)] outline outline-1 outline-offset-[-1px] outline-neutral-300 inline-flex justify-start items-start gap-2.5 overflow-hidden">
            <div class="w-56 inline-flex flex-col justify-start items-start gap-4">
              <div class="self-stretch h-3.5 justify-center text-color-azure-18 text-xs font-semibold font-['Inter'] leading-tight">
                ${
                  singleDay 
                  ?
                    eventStart.toLocaleDateString() + ' ' + eventStart.toLocaleTimeString([], { timeStyle: 'short' })
                  :
                    eventStart.toLocaleDateString() + ' ' + eventStart.toLocaleTimeString([], { timeStyle: 'short' }) + ' - ' +
                    eventEnd.toLocaleDateString() + ' ' + eventEnd.toLocaleTimeString([], { timeStyle: 'short' })
                }
              </div>
              <div class="self-stretch flex flex-col justify-start items-start gap-1">
                <div class="self-stretch h-4 justify-center text-black text-base font-['Inter'] font-bold leading-none">
                  ${eventTitle}
                </div>
                <div class="text-sm self-stretch h-4 justify-center text-black font-['Inter'] font-medium leading-none">
                  ${orgName}
                </div>
                <div class="self-stretch h-2.5 inline-flex justify-start items-center gap-0.5">
                  <div class="w-48 h-3 justify-center text-color-grey-46 text-xs text-[#6B7280] font-['Inter'] leading-none">
                    ${location}
                  </div>
                </div>
              </div>
              <div class="justify-center text-black text-xs font-normal font-['Inter'] leading-none">
                ${description.length > truncateLength ? description.substring(0, truncateLength) + '...' : description}
              </div>
              <div>
                ${eventTypes.map(type => `
                  <span style="background-color: ${badge_bg_colors[type]}; color: ${badge_text_colors[type]}; border: 1px solid ${badge_text_colors[type]};" class="text-xs font-medium leading-none font-['Inter'] px-4 py-2 rounded-full">${type}</span>
                `)}
              </div>
            </div>
          </div>
        `;
        
        // Initialize the tooltip with custom options
        new Tooltip(info.el, {
          title: tooltipContent,
          placement: 'right', // Position to the right of the event
          html: true, // Allow HTML content
          template: '<div class="tooltip z-10" role="tooltip"><div class="tooltip-inner"></div></div>',
          container: 'body', // Append to body to avoid z-index issues
          trigger: 'hover'
        });
      },
    });
    window.calendar.render();
  });

